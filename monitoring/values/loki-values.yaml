loki:
  auth_enabled: false
  commonConfig:
    replication_factor: 1
  storage:
    type: filesystem
  limits_config:
    retention_period: 720h
    ingestion_rate_mb: 16
    ingestion_burst_size_mb: 32
    max_query_parallelism: 32
    max_query_series: 500

# 使用单实例模式，不需要对象存储
deploymentMode: SingleBinary
singleBinary:
  replicas: 1
  enabled: true

# 禁用其他部署模式
simpleScalable:
  enabled: false
  replicas: 0  # 必须设置为 0，否则会与 singleBinary 冲突
read:
  enabled: false
  replicas: 0
write:
  enabled: false
  replicas: 0
backend:
  enabled: false
  replicas: 0

persistence:
  enabled: true
  storageClassName: do-block-storage
  size: 50Gi

resources:
  requests:
    cpu: 200m
    memory: 512Mi
  limits:
    cpu: 1000m
    memory: 2Gi

service:
  type: ClusterIP
  port: 3100

# 禁用缓存组件（SingleBinary 模式不需要，且会导致 Pending 状态）
chunksCache:
  enabled: false

resultsCache:
  enabled: false

# Gateway 可以保留（用于统一入口），但也可以禁用
# 如果禁用，组件需要直接访问 loki Service
gateway:
  enabled: true  # 保留 gateway，因为日志显示正在使用

# 禁用 Canary（可选，用于测试）
canary:
  enabled: false

