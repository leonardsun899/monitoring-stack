# Loki 配置
loki:
  auth_enabled: false
  commonConfig:
    replication_factor: 1
  storage:
    type: filesystem
  limits_config:
    retention_period: 720h
    ingestion_rate_mb: 16
    ingestion_burst_size_mb: 32
    max_query_parallelism: 32
    max_query_series: 500

# 使用单实例模式，不需要对象存储
# 重要：必须设置 deploymentMode，否则会报错
deploymentMode: SingleBinary

singleBinary:
  enabled: true
  replicas: 1

# 禁用其他部署模式（必须显式禁用，且 replicas 必须设置为 0）
simpleScalable:
  enabled: false
  replicas: 0  # 必须显式设置为 0，否则会与 singleBinary 冲突
read:
  enabled: false
  replicas: 0
write:
  enabled: false
  replicas: 0
backend:
  enabled: false
  replicas: 0

# 持久化存储
persistence:
  enabled: true
  storageClassName: do-block-storage
  size: 50Gi

# 资源限制
resources:
  requests:
    cpu: 200m
    memory: 512Mi
  limits:
    cpu: 1000m
    memory: 2Gi

# Service 配置
service:
  type: ClusterIP
  port: 3100

# 禁用所有缓存组件（SingleBinary 模式不需要）
chunksCache:
  enabled: false

resultsCache:
  enabled: false

# 禁用 Gateway（SingleBinary 模式直接使用 Service）
# 组件应该直接访问 loki Service: http://loki.monitoring.svc:3100
gateway:
  enabled: false

# 禁用 Canary（测试组件，非必需）
canary:
  enabled: false

# 注意：monitoring 配置块可能不是必需的，如果还有错误可以尝试移除

